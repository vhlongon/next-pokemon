import type { GetStaticProps, NextPage } from 'next';
import Head from 'next/head';
import Search from '../components/Search';
import { fetchPokemons } from '../dataFetchers';

interface Props {
  data: { pokemonNames: string[] | [] };
  notFound?: boolean;
}
const Home: NextPage<Props> = ({ data }: Props) => {
  return (
    <div className="bg-gray-100 h-full py-10">
      <Head>
        <title>Pokemon - next js</title>
        <meta name="description" content="Pokemon list generated by next js" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <h1 className="mb-10 text-indigo-900 text-center text-6xl font-RobotoCondensed">
        Next js pokemon
      </h1>
      <Search pokemonNames={data?.pokemonNames} />
    </div>
  );
};

export default Home;

export const getStaticProps: GetStaticProps<{
  data: { pokemonNames: string[] | [] };
  notFound?: boolean;
}> = async () => {
  try {
    const pokemons = await fetchPokemons(2000);
    const pokemonNames = pokemons.results.map(({ name }) => name);

    return {
      props: {
        data: { pokemonNames },
      },
    };
  } catch (error) {
    return { notFound: true };
  }
};
